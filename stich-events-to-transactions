A while ago a previous colleague of mine initiated an A/B test in the app environment, using the testing function of Firebase.
Since Firebase's reporting function barely allows us to do any analysis of, 
I wrote this query to fetch the revenue generated by each user enrolled in the test.
From this point it's possible to compare total revenue, average order value, as well as conversion rate of variant A and Baseline.

SELECT * FROM(
SELECT
  CASE userProperty.value.string_value
    WHEN "0" THEN "Baseline"
    WHEN "1" THEN "Variant A"
END
  AS experimentVariant,
  user_pseudo_id
FROM
  `your_dataset.events_*`,
  UNNEST(user_properties) AS userProperty
WHERE
  (_TABLE_SUFFIX BETWEEN '20220420'
    AND '20220428'
    AND event_name ='test_variant_available')
  AND userProperty.key = "firebase_exp_6"
GROUP BY
  experimentVariant,
  user_pseudo_id 
) AS q1
JOIN
(SELECT
  user_pseudo_id,
  ecommerce.transaction_id,
  item_id,
  item_revenue_in_usd * 9.5 AS item_revenue_in_sek
FROM
  `your_dataset.events_*`,
  UNNEST(user_properties) AS userProperty, UNNEST(items) AS items
WHERE
  (_TABLE_SUFFIX BETWEEN '20220420'
    AND '20220428'
    AND event_name ='purchase'
    AND device.operating_system = 'iOS')) AS q2
    ON q1.user_pseudo_id = q2.user_pseudo_id
